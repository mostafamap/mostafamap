<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¯ÙˆØ±Ø§Ù† Ø®Ø¯Ù…Øª ÙˆØ¸ÛŒÙÙ‡ Ø¹Ù…ÙˆÙ…ÛŒ (Ø®Ø±ÛŒØ¯ Ø³Ø±Ø¨Ø§Ø²ÛŒ)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #2c3e50;
            min-height: 100vh;
            padding-bottom: 60px;
            text-align: center;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(to right, #1a5276, #2874a6);
            color: white;
            padding: 25px 0;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            text-align: center;
        }
        
        .header-link {
            position: absolute;
            left: 20px;
            bottom: 10px;
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.8rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .header-link:hover {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
        }
        
        .card {
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            border: none;
            transition: transform 0.3s ease;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.95);
            margin: 0 auto 20px;
            text-align: right;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-title {
            color: #2874a6;
            font-weight: 700;
            border-bottom: 2px solid #f1c40f;
            padding-bottom: 10px;
            text-align: center;
        }
        
        .form-label {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .btn-calculate {
            background: linear-gradient(to right, #27ae60, #2ecc71);
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3);
            transition: all 0.3s ease;
        }
        
        .btn-calculate:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(46, 204, 113, 0.4);
        }
        
        .btn-reset {
            background: linear-gradient(to right, #e74c3c, #c0392b);
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
            margin-right: 10px;
        }
        
        .btn-reset:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(231, 76, 60, 0.4);
        }
        
        .result-container {
            background: linear-gradient(135deg, #e8f4fc 0%, #d5e8f7 100%);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #3498db;
            margin-top: 20px;
            display: none;
            text-align: center;
        }
        
        .result-title {
            color: #27ae60;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        
        .footer {
            background: linear-gradient(to right, #1a5276, #2874a6);
            color: white;
            padding: 25px 0;
            margin-top: 40px;
            border-radius: 15px 15px 0 0;
            text-align: center;
        }
        
        .footer-links a {
            color: #f1c40f;
            text-decoration: none;
            margin: 0 10px;
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        
        .logo {
            font-weight: 800;
            font-size: 28px;
            color: #f1c40f;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .form-text {
            color: #6c757d;
            font-size: 0.85rem;
            margin-top: 5px;
            text-align: right;
        }
        
        .blinking-text {
            animation: blink 2s infinite;
            color: #e74c3c;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .input-group-text {
            direction: ltr;
        }
        
        .number-input {
            direction: ltr;
            text-align: left;
        }
        
        .pension-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            height: 100%;
            margin-bottom: 15px;
        }
        
        .pension-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }
        
        .pension-card.selected {
            border-color: #3498db;
            background-color: #e1f5fe;
        }
        
        .pension-card.highlighted {
            border-color: #f1c40f;
            background-color: #fff9e6;
        }
        
        .pension-card.highlighted.selected {
            border-color: #3498db;
            background-color: #e1f5fe;
        }
        
        .pension-card-title {
            font-weight: 700;
            color: #1a5276;
            margin-bottom: 10px;
        }
        
        .pension-card-details {
            font-size: 0.9rem;
            color: #2c3e50;
        }
        
        .calculation-steps {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .step {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #bdc3c7;
        }
        
        .step:last-child {
            border-bottom: none;
        }
        
        .step-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .result-highlight {
            background-color: #fef9e7;
            padding: 10px;
            border-radius: 8px;
            font-weight: 700;
            color: #d35400;
            margin: 10px 0;
            text-align: center;
        }
        
        .formula-box {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: right;
        }
        
        .info-alert {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-right: 4px solid #3498db;
        }
        
        .detailed-calculation {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: right;
            overflow-x: auto;
        }
        
        .calculation-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            min-width: 600px;
        }
        
        .calculation-table th, .calculation-table td {
            padding: 8px;
            border: 1px solid #dee2e6;
            text-align: center;
            font-size: 0.85rem;
        }
        
        .calculation-table th {
            background-color: #e9ecef;
        }
        
        .period-selection {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .period-option {
            cursor: pointer;
            padding: 10px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .period-option:hover {
            background-color: #d5e8f7;
        }
        
        .period-option.selected {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }
            .card {
                margin-bottom: 15px;
            }
            .header-link {
                position: relative;
                left: 0;
                bottom: 0;
                display: block;
                text-align: center;
                margin-top: 10px;
            }
            
            .calculation-table th, .calculation-table td {
                padding: 6px 4px;
                font-size: 0.75rem;
            }
            
            .detailed-calculation {
                padding: 10px;
            }
            
            .formula-box {
                padding: 10px;
            }
            
            .result-container {
                padding: 15px;
            }
        }
        
        @media (max-width: 576px) {
            .calculation-table th, .calculation-table td {
                padding: 4px 2px;
                font-size: 0.7rem;
            }
            
            .calculation-table {
                min-width: 500px;
            }
            
            .btn-calculate, .btn-reset {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>

    <!-- Ù‡Ø¯Ø± -->
    <div class="header text-center">
        <div class="container">
            <h1 class="mb-3"><i class="bi bi-calculator"></i>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¯ÙˆØ±Ø§Ù† Ø®Ø¯Ù…Øª ÙˆØ¸ÛŒÙÙ‡ Ø¹Ù…ÙˆÙ…ÛŒ (Ø®Ø±ÛŒØ¯ Ø³Ø±Ø¨Ø§Ø²ÛŒ)</h1>
            <p class="lead">Ù…Ù†Ø·Ø¨Ù‚ Ø¨Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÙ… Ù¾ÛŒØ´Ø±ÙØª Ø¯Ø± Ø³Ø§Ù„ 1404</p>
            
            <!-- Ù„ÛŒÙ†Ú© Ú©Ù… Ø±Ù†Ú¯ Ø¯Ø± Ù‡Ø¯Ø± -->
            <a href="https://kargozin.com/" class="header-link" target="_blank">
                <i class="bi bi-link-45deg"></i> kargozin.com
            </a>
        </div>
    </div>

    <div class="container mt-4">
        <h2 class="text-center">Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ</h2>
        
        <!-- Ú©Ø§Ø±Øª Ø§Ù†ØªØ®Ø§Ø¨ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ -->
        <div class="card mb-4">
            <div class="card-header text-center">Ø§Ù†ØªØ®Ø§Ø¨ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ</div>
            <div class="card-body">
                <div class="row" id="pension-funds-container">
                    <!-- ØµÙ†Ø¯ÙˆÙ‚â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø¨Ø§ JavaScript Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
            </div>
        </div>
        
        <!-- Ú©Ø§Ø±Øª ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ -->
        <div class="card mb-4" id="data-input-card">
            <div class="card-header text-center">ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡</div>
            <div class="card-body">
                <div class="info-alert">
                    <h5><i class="bi bi-info-circle"></i> Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</h5>
                    <ul class="text-right" style="padding-right: 20px;">
                        <li>Ø¨Ø§ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø®ÙˆØ¯ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ùˆ Ù‚Ø³Ù…Øª {Ø¨ÛŒÙ…Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯} ÛŒØ§ {Ø¢Ø®Ø±ÛŒÙ† Ø­Ù‚ÙˆÙ‚ Ùˆ Ø¯Ø³ØªÙ…Ø²Ø¯ Ù…Ø¨Ù†Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø­Ù‚ Ø¨ÛŒÙ…Ù‡} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø®Ø¯Ù…Øª Ø³Ø±Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø§Ù‡ (Ù…Ø«Ù„Ø§Ù‹ 24) ÛŒØ§ Ø±ÙˆØ² (Ù…Ø«Ù„Ø§Ù‹ 730) ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                        <li><strong>ØªÙˆØ¬Ù‡:</strong> Ø¨Ø±Ø§ÛŒ Ù…Ø¯Øª Ø®Ø¯Ù…Øª ØªØ§ Û³Û° Ù…Ø§Ù‡ØŒ Ø¹Ø¯Ø¯ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø§Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯. Ø¨Ø±Ø§ÛŒ Ù…Ø¯Øª Ø¨ÛŒØ´ØªØ± Ø§Ø² Û³Û° Ù…Ø§Ù‡ØŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø±ÙˆØ² ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯</li>
                    </ul>
                </div>
                
                <div class="row">
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="employee-insurance" class="form-label">Ø¨ÛŒÙ…Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯</label>
                            <input type="text" class="form-control number-input formatted-number" id="employee-insurance" placeholder="Ù…Ø¨Ù„Øº Ø¨ÛŒÙ…Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯">
                            <div class="form-text blinking-text">Ø§Ø² Ø±ÙˆÛŒ Ù…Ø¨Ù„Øº Ø¯Ø±Ø¬ Ø´Ø¯Ù‡ Ø¯Ø± ÙÛŒØ´ Ø­Ù‚ÙˆÙ‚ÛŒ Ú©Ù‡ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù†Ø±Ø§ Ø¯Ø± Ø³ØªÙˆÙ† Ú©Ø³ÙˆØ± Ùˆ Ø¨Ø¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ù‡Ù…ÛŒÙ† Ø¹Ù†ÙˆØ§Ù† Ø¨ÛŒÙ…Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯ ÛŒØ§ Ø¹Ù†Ø§ÙˆÛŒÙ† Ù…Ø´Ø§Ø¨Ù‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯.</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="last-salary" class="form-label">Ø¢Ø®Ø±ÛŒÙ† Ø­Ù‚ÙˆÙ‚ ÛŒØ§ Ø¯Ø³ØªÙ…Ø²Ø¯ Ù…Ø¨Ù†Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø­Ù‚ Ø¨ÛŒÙ…Ù‡</label>
                            <input type="text" class="form-control number-input formatted-number" id="last-salary" placeholder="Ù…Ø¨Ù„Øº Ø¢Ø®Ø±ÛŒÙ† Ø­Ù‚ÙˆÙ‚">
                            <div class="form-text blinking-text">Ø§Ø±Ø³Ø§Ù„ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾ÛŒØ§Ù…Ú© ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø² Ø±ÙˆÛŒ Ø­Ú©Ù… Ù¾Ø³ Ø§Ø² Ú©Ø³Ø± Ø§Ù‚Ù„Ø§Ù… ØºÛŒØ± Ù…Ø´Ù…ÙˆÙ„ØŒ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø­Ù‚ÙˆÙ‚ ÛŒØ§ Ø¯Ø³ØªÙ…Ø²Ø¯ Ù…Ø¨Ù†Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ ÛŒÚ©Ø³Ø§Ù„ Ù‚Ø¨Ù„ Ø§Ø² ØªØ§Ø±ÛŒØ® Ø¯Ø±Ø®ÙˆØ§Ø³Øª</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <label for="military-service" class="form-label">Ø®Ø¯Ù…Øª Ø³Ø±Ø¨Ø§Ø²ÛŒ</label>
                            <input type="text" class="form-control number-input" id="military-service" placeholder="Ù…Ø§Ù‡ ÛŒØ§ Ø±ÙˆØ² (Ù…Ø«Ù„Ø§Ù‹ 24 ÛŒØ§ 730)">
                            <div class="form-text blinking-text">ØªØ§ Û³Û° Ù…Ø§Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø§Ù‡ ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯. Ø¨ÛŒØ´ØªØ± Ø§Ø² Û³Û° Ù…Ø§Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø±ÙˆØ² ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯</div>
                            <div class="form-text" id="month-conversion-result"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ -->
                <div id="period-selection-container" class="period-selection" style="display: none;">
                    <h5><i class="bi bi-calendar-event"></i> Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ (ØµÙ†Ø¯ÙˆÙ‚ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ)</h5>
                    <div class="row text-center">
                        <div class="col-md-6">
                            <div class="period-option" data-period="first-half">
                                <h6>Û¶ Ù…Ø§Ù‡Ù‡ Ø§ÙˆÙ„ Û±Û´Û°Û´</h6>
                                <p>Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯: Û±Û°Û·,Û³Û·Û³,Û³Û³Û¶ Ø±ÛŒØ§Ù„</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="period-option" data-period="second-half">
                                <h6>Û¶ Ù…Ø§Ù‡Ù‡ Ø¯ÙˆÙ… Û±Û´Û°Û´</h6>
                                <p>Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯: Û±Û°Û³,Û¹Û°Û¹,Û¶Û¸Û° Ø±ÛŒØ§Ù„</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-3">
                    <button class="btn btn-calculate" id="calculate-btn">
                        <i class="bi bi-calculator me-2"></i> Ù…Ø­Ø§Ø³Ø¨Ù‡
                    </button>
                    <button class="btn btn-reset" id="reset-btn">
                        <i class="bi bi-arrow-clockwise me-2"></i> Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Ú©Ø§Ø±Øª Ù†ØªØ§ÛŒØ¬ -->
        <div class="card result-card" id="result-card">
            <div class="card-header text-center">Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ù‡</div>
            <div class="card-body">
                <div id="result-container" class="result-container">
                    <h3 class="result-title">Ù…Ø¨Ù„Øº ØªÙ‚Ø±ÛŒØ¨ÛŒ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¯ÙˆØ±Ø§Ù† Ø®Ø¯Ù…Øª ÙˆØ¸ÛŒÙÙ‡ Ø¹Ù…ÙˆÙ…ÛŒ</h3>
                    
                    <div class="calculation-steps">
                        <div class="step">
                            <span>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ (Ú©Ø§Ø±Ù…Ù†Ø¯):</span>
                            <span class="step-value" id="employee-share-result">0 Ø±ÛŒØ§Ù„</span>
                        </div>
                        <div class="step">
                            <span>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§:</span>
                            <span class="step-value" id="employer-share-result">0 Ø±ÛŒØ§Ù„</span>
                        </div>
                        <div class="step">
                            <span>Ø³Ù‡Ù… Ø¯ÙˆÙ„Øª:</span>
                            <span class="step-value" id="government-share-result">0 Ø±ÛŒØ§Ù„</span>
                        </div>
                        <div class="step">
                            <span>Ø¬Ù…Ø¹ Ú©Ù„:</span>
                            <span class="step-value" id="total-result">0 Ø±ÛŒØ§Ù„</span>
                        </div>
                    </div>
                    
                    <div class="result-highlight">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        <span id="highlight-result">Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯: 0 Ø±ÛŒØ§Ù„</span>
                    </div>
                    
                    <div id="detailed-calculation" class="detailed-calculation">
                        <!-- Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                    </div>
                    
                    <div class="formula-box">
                        <h5>ÙØ±Ù…ÙˆÙ„ Ù…Ø­Ø§Ø³Ø¨Ù‡:</h5>
                        <p id="formula-details">ÙØ±Ù…ÙˆÙ„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                    </div>
                </div>
                
                <div id="error-message" class="alert alert-danger mt-3" style="display: none;">
                    Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ Ùˆ ÛŒÚ© ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯.
                </div>
            </div>
        </div>
        
        <!-- Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯ -->
        <div class="card mt-4">
            <div class="card-body">
                <h4 class="card-title text-center"><i class="bi bi-info-circle"></i> Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯</h4>
                <div class="row">
                    <div class="mt-4">
                        <a href="https://account.tamin.ir/auth/login" target="_blank" class="btn btn-outline-primary btn-sm d-block mb-2">
                            <i class="bi bi-link me-2"></i> Ø¯Ø±Ú¯Ø§Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
                        </a>
                        <a href="https://eservices.tamin.ir/" target="_blank" class="btn btn-outline-primary btn-sm d-block mb-2">
                            <i class="bi bi-link me-2"></i> Ø³Ø§Ù…Ø§Ù†Ù‡ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© (Ø³Ø±ÙˆÛŒØ³ Ø§ØµÙ„ÛŒ)
                        </a>
                        <a href="https://es.tamin.ir/" target="_blank" class="btn btn-outline-primary btn-sm d-block mb-2">
                            <i class="bi bi-link me-2"></i> Ø³Ø§Ù…Ø§Ù†Ù‡ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© (Ø³Ø±ÙˆÛŒØ³ Ú©Ù…Ú©ÛŒ)
                        </a>
                        <a href="https://www.tamin.ir/content/files/hoseini/376407.mp4" target="_blank" class="btn btn-outline-primary btn-sm d-block mb-2">
                            <i class="bi bi-link me-2"></i> ÙÛŒÙ„Ù… Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø³Ø±Ø¨Ø§Ø²ÛŒ Ø¯Ø± ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
                        </a>
                        <a href="https://eservices.cspf.ir/" target="_blank" class="btn btn-outline-primary btn-sm d-block mb-2">
                            <i class="bi bi-link me-2"></i> Ø¯Ø±Ú¯Ø§Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ
                        </a>
                    </div>

                    <div class="mt-4 text-center">
                        <a href="https://kargozin.com/" target="_blank" class="btn btn-primary">
                            <i class="bi bi-google me-2"></i> Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÙÙˆØªØ± -->
    <footer class="footer text-center mt-5">
        <div class="container">
            <p class="mb-3">ğŸ€ğŸ¤ğŸŒ» ØªÙˆØ³Ø¹Ù‡â€ŒÛŒØ§ÙØªÙ‡ ØªÙˆØ³Ø· <span class="logo">Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ</span> | Ù†Ø³Ø®Ù‡ 1404/08/08 ğŸŒ»ğŸ¤ğŸ€</p>
            <div class="footer-links mb-3">
                <a href="mailto:mustafa.alimohammadi@gmail.com">
                    <i class="bi bi-envelope me-1"></i> ØªÙˆØ³Ø¹Ù‡ Ø¯Ù‡Ù†Ø¯Ù‡: Ù…ØµØ·ÙÛŒ Ø¹Ù„ÛŒÙ…Ø­Ù…Ø¯ÛŒ
                </a>
                <a href="https://kargozin.com/" target="_blank">
                    <i class="bi bi-globe me-1"></i> Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ/Ø³Ø§Ù…Ø§Ù†Ù‡ Ø§Ø¯Ø§Ø±ÛŒ Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù…ÛŒ 
                </a>
                <a href="https://t.me/+W10Ae66GdN40MDg0" target="_blank">
                    <i class="bi bi-telegram me-1"></i> Ú¯Ø±ÙˆÙ‡ ØªØ¨Ø§Ø¯Ù„ Ù†Ø¸Ø± Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ
                </a>
                <a href="http://t.me/+eRSSofhaSpo4ZGNk" target="_blank">
                    <i class="bi bi-telegram me-1"></i> Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ
                </a>
            </div>
            <p>Â© Ú©Ù„ÛŒÙ‡ Ø­Ù‚ÙˆÙ‚ Ø§ÛŒÙ† Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØª Ù…Ø¬Ù„Ù‡ Ú©Ø§Ø±Ú¯Ø²ÛŒÙ†ÛŒ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</p>
        </div>
    </footer>

    <script>
        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ
        const pensionFunds = [
            { name: "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ", employee: 9, employer: 13.5, government: "ØªØ§Ù…ÛŒÙ† Ú©Ø³Ø±ÛŒ", total: 22.5, highlighted: true },
            { name: "ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ", employee: 7, employer: 20, government: "Ø³Ù‡ Ø¯Ø±ØµØ¯ Ø¨ÛŒÙ…Ù‡ Ø¨ÛŒÚ©Ø§Ø±ÛŒ", total: 30, highlighted: true },
            { name: "Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ", employee: 8.5, employer: 17, government: "-", total: 25.5 },
            { name: "Ù…Ø´ØªØ±Ú© Ø¨Ø§Ù†Ú©Ù‡Ø§", employee: 9, employer: 21, government: "-", total: 30 },
            { name: "Ø¢ÙŠÙ†Ø¯Ù‡ Ø³Ø§Ø²", employee: 7, employer: 22, government: "-", total: 29 },
            { name: "ØµØ¯Ø§ Ùˆ Ø³ÙŠÙ…Ø§", employee: 8, employer: 16, government: "-", total: 24 },
            { name: "Ø¨Ù†Ø§Ø¯Ø± ÙˆÙƒØ´ØªÙŠØ±Ø§Ù†ÙŠ Ø§ÙŠØ±Ø§Ù†", employee: 7, employer: 14, government: "-", total: 21 },
            { name: "Ù‡ÙˆØ§Ù¾ÙŠÙ…Ø§ÙŠÙŠ Ø¬Ù…Ù‡ÙˆØ±ÙŠ Ø§Ø³Ù„Ø§Ù…ÙŠ Ø§ÙŠØ±Ø§Ù† (Ù‡Ù…Ø§)", employee: 7, employer: 14, government: "-", total: 21 },
            { name: "Ø¨ÙŠÙ…Ù‡ Ø§ÙŠØ±Ø§Ù†", employee: 9, employer: 18, government: "-", total: 27 },
            { name: "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ùˆ Ù…Ø¹Ø°ÙˆØ±ÙŠØª Ø¬Ù‡Ø§Ø¯", employee: 9, employer: 13.5, government: "-", total: 22.5 },
            { name: "Ú©Ø§Ø±Ú©Ù†Ø§Ù† ÙÙˆÙ„Ø§Ø¯", employee: 10, employer: 20, government: "-", total: 30 },
            { name: "Ø¨ÙŠÙ…Ù‡ Ù…Ø±Ú©Ø²ÛŒ Ø§ÙŠØ±Ø§Ù†", employee: 9, employer: 18, government: "-", total: 27 },
            { name: "Ø´Ù‡Ø±Ø¯Ø§Ø±ÙŠ ØªÙ‡Ø±Ø§Ù†", employee: 7, employer: 14, government: "-", total: 21 },
            { name: "ØµÙ†Ø¹Øª Ù†ÙØª", employee: 6, employer: 19, government: "-", total: 25 },
            { name: "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÙŠ ÙˆØ¨ÙŠÙ…Ù‡ Ø§Ø±ØªØ´", employee: 9, employer: 13.5, government: "-", total: 22.5 },
            { name: "Ø´Ø±ÙƒØª Ù…Ø®Ø§Ø¨Ø±Ø§Øª", employee: 8.5, employer: 12.75, government: "-", total: 21.25 },
            { name: "ØµÙ†Ø§ÙŠØ¹ Ù…Ø³ Ø§ÙŠØ±Ø§Ù†", employee: 10, employer: 20, government: "-", total: 30 },
            { name: "Ø³Ù¾Ø§Ù‡ Ù¾Ø§Ø³Ø¯Ø§Ø±Ø§Ù†", employee: 9, employer: 13.5, government: "-", total: 22.5 },
            { name: "Ù†ÙŠØ±ÙˆÙ‡Ø§ÙŠ Ø§Ù†ØªØ¸Ø§Ù…ÙŠ", employee: 9, employer: 13.5, government: "-", total: 22.5 }
        ];

        // Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
        const minSalaries = {
            "1404-first-half": 107373336,
            "1404-second-half": 103909680
        };

        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
        let selectedPensionFund = null;
        let selectedPeriod = null;

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙ†Ø¯ÙˆÙ‚â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ
        function loadPensionFunds() {
            const container = document.getElementById('pension-funds-container');
            
            pensionFunds.forEach((fund, index) => {
                const col = document.createElement('div');
                col.className = 'col-md-6 col-lg-4';
                
                const cardClass = fund.highlighted ? 'pension-card highlighted' : 'pension-card';
                
                col.innerHTML = `
                    <div class="card ${cardClass}" data-index="${index}">
                        <div class="card-body text-center">
                            <h5 class="pension-card-title">${fund.name}</h5>
                            <div class="pension-card-details">
                                <div>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡: ${fund.employee}%</div>
                                <div>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§: ${fund.employer}%</div>
                                <div>Ø³Ù‡Ù… Ø¯ÙˆÙ„Øª: ${fund.government}</div>
                                <div>Ø¬Ù…Ø¹: ${fund.total}%</div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(col);
            });
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø¨Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            document.querySelectorAll('.pension-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ù‡Ù…Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                    document.querySelectorAll('.pension-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ Ú©Ø§Ø±Øª Ú©Ù„ÛŒÚ© Ø´Ø¯Ù‡
                    this.classList.add('selected');
                    
                    // Ø°Ø®ÛŒØ±Ù‡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                    const index = parseInt(this.getAttribute('data-index'));
                    selectedPensionFund = pensionFunds[index];
                    
                    // Ù†Ù…Ø§ÛŒØ´ ÛŒØ§ Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ
                    const periodContainer = document.getElementById('period-selection-container');
                    if (selectedPensionFund.name === "ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ") {
                        periodContainer.style.display = 'block';
                        // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆØ±Ù‡ Ù‚Ø¨Ù„ÛŒ
                        selectedPeriod = null;
                        document.querySelectorAll('.period-option').forEach(option => {
                            option.classList.remove('selected');
                        });
                    } else {
                        periodContainer.style.display = 'none';
                        selectedPeriod = null;
                    }
                    
                    // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ù‚Ø³Ù…Øª ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡
                    document.getElementById('data-input-card').scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø¨Ù‡ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ
            document.querySelectorAll('.period-option').forEach(option => {
                option.addEventListener('click', function() {
                    // Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² Ù‡Ù…Ù‡ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§
                    document.querySelectorAll('.period-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ Ú¯Ø²ÛŒÙ†Ù‡ Ú©Ù„ÛŒÚ© Ø´Ø¯Ù‡
                    this.classList.add('selected');
                    
                    // Ø°Ø®ÛŒØ±Ù‡ Ø¯ÙˆØ±Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                    selectedPeriod = this.getAttribute('data-period');
                });
            });
        }

        // ØªØ§Ø¨Ø¹ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
        function convertPersianToEnglishNumbers(str) {
            if (!str) return '';
            
            const persianNumbers = ['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹'];
            const arabicNumbers = ['Ù ', 'Ù¡', 'Ù¢', 'Ù£', 'Ù¤', 'Ù¥', 'Ù¦', 'Ù§', 'Ù¨', 'Ù©'];
            const englishNumbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
            
            let result = str.toString();
            
            // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ
            for (let i = 0; i < 10; i++) {
                result = result.replace(new RegExp(persianNumbers[i], 'g'), englishNumbers[i]);
            }
            
            // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø¹Ø±Ø¨ÛŒ
            for (let i = 0; i < 10; i++) {
                result = result.replace(new RegExp(arabicNumbers[i], 'g'), englishNumbers[i]);
            }
            
            return result;
        }
        
        // ØªØ§Ø¨Ø¹ ÙØ±Ù…Øªâ€ŒØ¯Ù‡ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ø§ Ø¬Ø¯Ø§Ú©Ù†Ù†Ø¯Ù‡ Ù‡Ø²Ø§Ø±Ú¯Ø§Ù†
        function formatNumber(number) {
            if (number === null || number === undefined || isNaN(number)) return '';
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // ØªØ§Ø¨Ø¹ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ±Ù…Øª Ø´Ø¯Ù‡ Ø¨Ù‡ Ø¹Ø¯Ø¯ Ø®Ø§Ù„Øµ
        function parseFormattedNumber(formattedNumber) {
            if (!formattedNumber) return 0;
            
            // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ùˆ Ø¹Ø±Ø¨ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
            const cleanNumber = convertPersianToEnglishNumbers(formattedNumber);
            
            // Ø­Ø°Ù Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ ØºÛŒØ±Ø¹Ø¯Ø¯ÛŒ Ø¨Ù‡ Ø¬Ø² Ù†Ù‚Ø·Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ø¹Ø´Ø§Ø±ÛŒ
            const numericString = cleanNumber.replace(/[^\d.]/g, '');
            
            return parseFloat(numericString) || 0;
        }

        // ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø¯Ù…Øª Ø³Ø±Ø¨Ø§Ø²ÛŒ
        function calculateMilitaryMonths(value) {
            const numericValue = parseFormattedNumber(value);
            
            // Ø§Ú¯Ø± Ø¹Ø¯Ø¯ Ú©Ù…ØªØ± ÛŒØ§ Ù…Ø³Ø§ÙˆÛŒ 30 Ø¨Ø§Ø´Ø¯ (ØªØ§ Û².Ûµ Ø³Ø§Ù„ Ø³Ø±Ø¨Ø§Ø²ÛŒ)ØŒ ÙØ±Ø¶ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§Ù‡ Ø§Ø³Øª
            if (numericValue <= 30) {
                return numericValue;
            }
            
            // Ø§Ú¯Ø± Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² 30 Ø¨Ø§Ø´Ø¯ØŒ ÙØ±Ø¶ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ² Ø§Ø³Øª Ùˆ Ø¨Ù‡ Ù…Ø§Ù‡ ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            // Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ 730 Ø±ÙˆØ² Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø§ 24 Ù…Ø§Ù‡ Ø´ÙˆØ¯ØŒ Ø§Ø² ØªÙ‚Ø³ÛŒÙ… 730/30.4167 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            const daysInMonth = 730 / 24; // 30.4167 Ø±ÙˆØ² Ø¯Ø± Ù‡Ø± Ù…Ø§Ù‡
            return numericValue / daysInMonth;
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ØªØ¨Ø¯ÛŒÙ„ Ø±ÙˆØ² Ø¨Ù‡ Ù…Ø§Ù‡
        function showMonthConversion(value) {
            const numericValue = parseFormattedNumber(value);
            const conversionResult = document.getElementById('month-conversion-result');
            
            if (numericValue > 30) {
                const months = calculateMilitaryMonths(numericValue);
                conversionResult.innerHTML = `<strong>ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù…Ø§Ù‡:</strong> ${numericValue} Ø±ÙˆØ² = ${months.toFixed(4)} Ù…Ø§Ù‡`;
                conversionResult.style.color = '#28a745';
            } else {
                conversionResult.innerHTML = '';
            }
        }

        // ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
        function calculateTaminEjtemaei(baseSalary, militaryMonths) {
            let minSalary;
            
            if (selectedPeriod === "first-half") {
                minSalary = minSalaries["1404-first-half"];
            } else if (selectedPeriod === "second-half") {
                minSalary = minSalaries["1404-second-half"];
            } else {
                // Ø§Ú¯Ø± Ø¯ÙˆØ±Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ØŒ Ø§Ø² 6 Ù…Ø§Ù‡Ù‡ Ø¯ÙˆÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†
                minSalary = minSalaries["1404-second-half"];
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø³Ø±Ø¨Ø§Ø²ÛŒ
            const totalInsurance = baseSalary * militaryMonths * 0.23; // 23% Ø«Ø§Ø¨Øª
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯
            const employerShare = minSalary * militaryMonths * 0.16; // 16% Ø«Ø§Ø¨Øª
            
            // Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ = Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ - Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§
            const employeeShare = totalInsurance - employerShare;
            
            // Ø³Ù‡Ù… Ø¯ÙˆÙ„Øª ØµÙØ± Ø§Ø³Øª
            const governmentShare = 0;
            
            return {
                employeeShare,
                employerShare,
                governmentShare,
                total: totalInsurance,
                details: {
                    totalInsurance,
                    minSalary,
                    baseSalary,
                    militaryMonths,
                    period: selectedPeriod
                }
            };
        }

        // ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ
        function calculateBazneshasteKeshvari(baseSalary, militaryMonths) {
            const totalPercentage = selectedPensionFund.total;
            const totalAmount = baseSalary * militaryMonths * (totalPercentage / 100);
            
            const employeeShare = totalAmount * (selectedPensionFund.employee / totalPercentage);
            const employerShare = totalAmount * (selectedPensionFund.employer / totalPercentage);
            
            return {
                employeeShare,
                employerShare,
                governmentShare: 0,
                total: totalAmount,
                details: {
                    baseSalary,
                    militaryMonths,
                    totalPercentage
                }
            };
        }

        // ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØ± ØµÙ†Ø¯ÙˆÙ‚â€ŒÙ‡Ø§
        function calculateOtherFunds(baseSalary, militaryMonths) {
            const employeeShare = baseSalary * militaryMonths * (selectedPensionFund.employee / 100);
            const employerShare = baseSalary * militaryMonths * (selectedPensionFund.employer / 100);
            
            let governmentShare = 0;
            if (typeof selectedPensionFund.government === 'number') {
                governmentShare = baseSalary * militaryMonths * (selectedPensionFund.government / 100);
            }
            
            return {
                employeeShare,
                employerShare,
                governmentShare,
                total: employeeShare + employerShare + governmentShare,
                details: {
                    baseSalary,
                    militaryMonths
                }
            };
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
        function showTaminEjtemaeiDetails(result) {
            const details = result.details;
            const periodText = details.period === "first-half" ? "Û¶ Ù…Ø§Ù‡Ù‡ Ø§ÙˆÙ„ Û±Û´Û°Û´" : "Û¶ Ù…Ø§Ù‡Ù‡ Ø¯ÙˆÙ… Û±Û´Û°Û´";
            
            return `
                <h5>Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (${periodText}):</h5>
                <table class="calculation-table">
                    <tr>
                        <th>Ø´Ø±Ø­</th>
                        <th>Ù…Ù‚Ø¯Ø§Ø±</th>
                        <th>Ù…Ø­Ø§Ø³Ø¨Ù‡</th>
                        <th>Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„)</th>
                    </tr>
                    <tr>
                        <td>Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡</td>
                        <td>${formatNumber(details.baseSalary)} Ø±ÛŒØ§Ù„</td>
                        <td>-</td>
                        <td>${formatNumber(details.baseSalary)}</td>
                    </tr>
                    <tr>
                        <td>Ù…Ø¯Øª Ø®Ø¯Ù…Øª</td>
                        <td>${details.militaryMonths.toFixed(4)} Ù…Ø§Ù‡</td>
                        <td>-</td>
                        <td>${details.militaryMonths.toFixed(4)}</td>
                    </tr>
                    <tr>
                        <td>Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø³Ø±Ø¨Ø§Ø²ÛŒ</td>
                        <td>23%</td>
                        <td>${formatNumber(details.baseSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— 0.23</td>
                        <td>${formatNumber(Math.round(details.totalInsurance))}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ ${periodText})</td>
                        <td>16%</td>
                        <td>${formatNumber(details.minSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— 0.16</td>
                        <td>${formatNumber(Math.round(result.employerShare))}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡</td>
                        <td>${formatNumber(Math.round(details.totalInsurance))} - ${formatNumber(Math.round(result.employerShare))}</td>
                        <td>Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ - Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</td>
                        <td>${formatNumber(Math.round(result.employeeShare))}</td>
                    </tr>
                </table>
                <p class="mt-3"><strong>ØªÙˆØ¶ÛŒØ­Ø§Øª:</strong> Ø¨Ø±Ø§ÛŒ Ø¨ÛŒÙ…Ù‡ Ø¯ÙˆØ±Ù‡ Ø³Ø±Ø¨Ø§Ø²ÛŒØŒ Ù‚Ø§Ù†ÙˆÙ† ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒÛŒ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª:</p>
                <ul>
                    <li>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ Ø§Ø² 20% Ø¨Ù‡ 16% Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡ (4% Ú©Ø§Ù‡Ø´)</li>
                    <li>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø¨ÛŒÚ©Ø§Ø±ÛŒ 3% Ø­Ø°Ù Ø´Ø¯Ù‡ (Ø²ÛŒØ±Ø§ Ø³Ø±Ø¨Ø§Ø²Ø§Ù† Ù…Ø´Ù…ÙˆÙ„ Ø¨ÛŒÙ…Ù‡ Ø¨ÛŒÚ©Ø§Ø±ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯)</li>
                    <li>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡â€ŒØ´ÙˆÙ†Ø¯Ù‡ 7% Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡</li>
                    <li>Ø¬Ù…Ø¹ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø§Ø² 30% Ø¨Ù‡ 23% Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡ (7% Ú©Ø§Ù‡Ø´)</li>
                    <li>Ù…Ø´Ø§Ø±Ú©Øª Ø¯ÙˆÙ„Øª Ø¨Ø§Ø¨Øª Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒÛŒ Ù…Ø¹Ø§Ø¯Ù„ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ Ùˆ Ù…Ø§Ø²Ø§Ø¯ Ø¢Ù† Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª</li>
                </ul>
            `;
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ
        function showBazneshasteKeshvariDetails(result) {
            const details = result.details;
            
            return `
                <h5>Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ:</h5>
                <table class="calculation-table">
                    <tr>
                        <th>Ø´Ø±Ø­</th>
                        <th>Ù…Ù‚Ø¯Ø§Ø±</th>
                        <th>Ù…Ø­Ø§Ø³Ø¨Ù‡</th>
                        <th>Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„)</th>
                    </tr>
                    <tr>
                        <td>Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡</td>
                        <td>${formatNumber(details.baseSalary)} Ø±ÛŒØ§Ù„</td>
                        <td>-</td>
                        <td>${formatNumber(details.baseSalary)}</td>
                    </tr>
                    <tr>
                        <td>Ù…Ø¯Øª Ø®Ø¯Ù…Øª</td>
                        <td>${details.militaryMonths.toFixed(4)} Ù…Ø§Ù‡</td>
                        <td>-</td>
                        <td>${details.militaryMonths.toFixed(4)}</td>
                    </tr>
                    <tr>
                        <td>Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø³Ø±Ø¨Ø§Ø²ÛŒ</td>
                        <td>${details.totalPercentage}%</td>
                        <td>${formatNumber(details.baseSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— 0.225</td>
                        <td>${formatNumber(Math.round(result.total))}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡</td>
                        <td>${selectedPensionFund.employee}%</td>
                        <td>${formatNumber(Math.round(result.total))} Ã— (9 / 22.5)</td>
                        <td>${formatNumber(Math.round(result.employeeShare))}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</td>
                        <td>${selectedPensionFund.employer}%</td>
                        <td>${formatNumber(Math.round(result.total))} Ã— (13.5 / 22.5)</td>
                        <td>${formatNumber(Math.round(result.employerShare))}</td>
                    </tr>
                </table>
                <p class="mt-3"><strong>ÙØ±Ù…ÙˆÙ„ Ù…Ø­Ø§Ø³Ø¨Ù‡:</strong></p>
                <p>Ú©Ù„ Ù…Ø¨Ù„Øº Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ = Ø¯Ø³ØªÙ…Ø²Ø¯ Ù…Ø¨Ù†Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø²Ù…Ø§Ù† ØªÙ‚Ø§Ø¶Ø§ ÛŒØ§ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ø³ØªÙ…Ø²Ø¯ Ø·ÛŒ ÛŒÚ©Ø³Ø§Ù„ Ù‚Ø¨Ù„ Ø§Ø² Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (Ù‡Ø± Ú©Ø¯Ø§Ù… Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯) Ã— Ù…Ø¯Øª Ø®Ø¯Ù…Øª Ã— Ù†Ø±Ø® Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ (22.5%)</p>
            `;
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØ± ØµÙ†Ø¯ÙˆÙ‚â€ŒÙ‡Ø§
        function showOtherFundsDetails(result) {
            const details = result.details;
            
            return `
                <h5>Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ ${selectedPensionFund.name}:</h5>
                <table class="calculation-table">
                    <tr>
                        <th>Ø´Ø±Ø­</th>
                        <th>Ù…Ù‚Ø¯Ø§Ø±</th>
                        <th>Ù…Ø­Ø§Ø³Ø¨Ù‡</th>
                        <th>Ù…Ø¨Ù„Øº (Ø±ÛŒØ§Ù„)</th>
                    </tr>
                    <tr>
                        <td>Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡</td>
                        <td>${formatNumber(details.baseSalary)} Ø±ÛŒØ§Ù„</td>
                        <td>-</td>
                        <td>${formatNumber(details.baseSalary)}</td>
                    </tr>
                    <tr>
                        <td>Ù…Ø¯Øª Ø®Ø¯Ù…Øª</td>
                        <td>${details.militaryMonths.toFixed(4)} Ù…Ø§Ù‡</td>
                        <td>-</td>
                        <td>${details.militaryMonths.toFixed(4)}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡</td>
                        <td>${selectedPensionFund.employee}%</td>
                        <td>${formatNumber(details.baseSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— ${selectedPensionFund.employee/100}</td>
                        <td>${formatNumber(Math.round(result.employeeShare))}</td>
                    </tr>
                    <tr>
                        <td>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</td>
                        <td>${selectedPensionFund.employer}%</td>
                        <td>${formatNumber(details.baseSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— ${selectedPensionFund.employer/100}</td>
                        <td>${formatNumber(Math.round(result.employerShare))}</td>
                    </tr>
                    ${typeof selectedPensionFund.government === 'number' ? `
                    <tr>
                        <td>Ø³Ù‡Ù… Ø¯ÙˆÙ„Øª</td>
                        <td>${selectedPensionFund.government}%</td>
                        <td>${formatNumber(details.baseSalary)} Ã— ${details.militaryMonths.toFixed(4)} Ã— ${selectedPensionFund.government/100}</td>
                        <td>${formatNumber(Math.round(result.governmentShare))}</td>
                    </tr>
                    ` : ''}
                    <tr>
                        <td>Ø¬Ù…Ø¹ Ú©Ù„</td>
                        <td>${selectedPensionFund.total}%</td>
                        <td>${formatNumber(Math.round(result.employeeShare))} + ${formatNumber(Math.round(result.employerShare))} + ${typeof selectedPensionFund.government === 'number' ? formatNumber(Math.round(result.governmentShare)) : '0'}</td>
                        <td>${formatNumber(Math.round(result.total))}</td>
                    </tr>
                </table>
            `;
        }

        // ØªØ§Ø¨Ø¹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡
        function calculateInsurance() {
            // Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ±ÙˆØ¯ÛŒ
            const employeeInsurance = parseFormattedNumber(document.getElementById('employee-insurance').value);
            const lastSalary = parseFormattedNumber(document.getElementById('last-salary').value);
            const militaryServiceValue = document.getElementById('military-service').value;
            const militaryMonths = calculateMilitaryMonths(militaryServiceValue);
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
            if (!selectedPensionFund || (!employeeInsurance && !lastSalary) || !militaryServiceValue) {
                document.getElementById('error-message').style.display = 'block';
                document.getElementById('result-container').style.display = 'none';
                return;
            }
            
            // Ø¨Ø±Ø§ÛŒ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒØŒ Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ
            if (selectedPensionFund.name === "ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ" && !selectedPeriod) {
                document.getElementById('error-message').innerHTML = "Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯.";
                document.getElementById('error-message').style.display = 'block';
                document.getElementById('result-container').style.display = 'none';
                return;
            }
            
            document.getElementById('error-message').style.display = 'none';
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡
            let baseSalary = lastSalary;
            
            // Ø§Ú¯Ø± Ø¨ÛŒÙ…Ù‡ Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡ Ø±Ø§ Ø§Ø² Ø¢Ù† Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒÙ…
            if (employeeInsurance && !lastSalary) {
                baseSalary = employeeInsurance / (selectedPensionFund.employee / 100);
            }
            
            let result;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ ØµÙ†Ø¯ÙˆÙ‚
            if (selectedPensionFund.name === "ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ") {
                result = calculateTaminEjtemaei(baseSalary, militaryMonths);
                const periodText = selectedPeriod === "first-half" ? "Û¶ Ù…Ø§Ù‡Ù‡ Ø§ÙˆÙ„ Û±Û´Û°Û´" : "Û¶ Ù…Ø§Ù‡Ù‡ Ø¯ÙˆÙ… Û±Û´Û°Û´";
                document.getElementById('formula-details').innerHTML = `
                    <p>Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ ØªØ§Ù…ÛŒÙ† Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (${periodText}):</p>
                    <ul>
                        <li>Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ø³Ø±Ø¨Ø§Ø²ÛŒ = Ø¯Ø³ØªÙ…Ø²Ø¯ Ã— Ù…Ø¯Øª Ø®Ø¯Ù…Øª Ã— 23%</li>
                        <li>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ ${periodText} Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                        <li>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ = Ú©Ù„ Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ - Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</li>
                        <li>Ù…Ø´Ø§Ø±Ú©Øª Ø¯ÙˆÙ„Øª Ø¨Ø§Ø¨Øª Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒÛŒ Ù…Ø¹Ø§Ø¯Ù„ Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ø³ØªÙ…Ø²Ø¯ Ùˆ Ù…Ø§Ø²Ø§Ø¯ Ø¢Ù† Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª</li>
                    </ul>
                `;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚
                document.getElementById('detailed-calculation').innerHTML = showTaminEjtemaeiDetails(result);
            } else if (selectedPensionFund.name === "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ") {
                result = calculateBazneshasteKeshvari(baseSalary, militaryMonths);
                document.getElementById('formula-details').innerHTML = `
                    <p>Ø¨Ø±Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ:</p>
                    <ul>
                        <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ${selectedPensionFund.total}% (${selectedPensionFund.employee}% Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡ + ${selectedPensionFund.employer}% Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§)</li>
                        <li>Ú©Ù„ Ù…Ø¨Ù„Øº Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ = Ø¯Ø³ØªÙ…Ø²Ø¯ Ù…Ø¨Ù†Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ø­Ù‚ Ø¨ÛŒÙ…Ù‡ Ã— Ù…Ø¯Øª Ø®Ø¯Ù…Øª Ã— 22.5%</li>
                    </ul>
                `;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚
                document.getElementById('detailed-calculation').innerHTML = showBazneshasteKeshvariDetails(result);
            } else {
                result = calculateOtherFunds(baseSalary, militaryMonths);
                document.getElementById('formula-details').innerHTML = `
                    <p>Ø¨Ø±Ø§ÛŒ ${selectedPensionFund.name}:</p>
                    <ul>
                        <li>Ø³Ù‡Ù… Ø¨ÛŒÙ…Ù‡ Ø´Ø¯Ù‡: ${selectedPensionFund.employee}%</li>
                        <li>Ø³Ù‡Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§: ${selectedPensionFund.employer}%</li>
                        <li>Ø³Ù‡Ù… Ø¯ÙˆÙ„Øª: ${selectedPensionFund.government}</li>
                        <li>Ø¬Ù…Ø¹: ${selectedPensionFund.total}%</li>
                    </ul>
                `;
                
                // Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚
                document.getElementById('detailed-calculation').innerHTML = showOtherFundsDetails(result);
            }
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            document.getElementById('employee-share-result').textContent = formatNumber(Math.round(result.employeeShare)) + ' Ø±ÛŒØ§Ù„';
            document.getElementById('employer-share-result').textContent = formatNumber(Math.round(result.employerShare)) + ' Ø±ÛŒØ§Ù„';
            
            if (typeof selectedPensionFund.government === 'number' && selectedPensionFund.name !== "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÚ¯ÛŒ Ú©Ø´ÙˆØ±ÛŒ") {
                document.getElementById('government-share-result').textContent = formatNumber(Math.round(result.governmentShare)) + ' Ø±ÛŒØ§Ù„';
            } else {
                document.getElementById('government-share-result').textContent = selectedPensionFund.government;
            }
            
            document.getElementById('total-result').textContent = formatNumber(Math.round(result.total)) + ' Ø±ÛŒØ§Ù„';
            document.getElementById('highlight-result').textContent = `Ø³Ù‡Ù… Ú©Ø§Ø±Ù…Ù†Ø¯: ${formatNumber(Math.round(result.employeeShare))} Ø±ÛŒØ§Ù„`;
            
            // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øª Ù†ØªØ§ÛŒØ¬
            document.getElementById('result-container').style.display = 'block';
            
            // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ù‚Ø³Ù…Øª Ù†ØªØ§ÛŒØ¬
            document.getElementById('result-card').scrollIntoView({ behavior: 'smooth' });
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙØ±Ù…
        function resetForm() {
            document.getElementById('employee-insurance').value = '';
            document.getElementById('last-salary').value = '';
            document.getElementById('military-service').value = '';
            document.getElementById('month-conversion-result').innerHTML = '';
            
            document.querySelectorAll('.pension-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.querySelectorAll('.period-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            selectedPensionFund = null;
            selectedPeriod = null;
            document.getElementById('period-selection-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'none';
            document.getElementById('error-message').style.display = 'none';
        }

        // Ø§ÙØ²ÙˆØ¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ ÙØ±Ù…Øªâ€ŒØ¯Ù‡ÛŒ Ø§Ø¹Ø¯Ø§Ø¯ Ù‡Ù†Ú¯Ø§Ù… ÙˆØ±ÙˆØ¯
        document.querySelectorAll('.formatted-number').forEach(input => {
            input.addEventListener('input', function(e) {
                // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ùˆ Ø¹Ø±Ø¨ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
                let value = convertPersianToEnglishNumbers(this.value);
                
                // Ø­Ø°Ù Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ ØºÛŒØ±Ø¹Ø¯Ø¯ÛŒ
                value = value.replace(/[^\d]/g, '');
                
                if (value) {
                    const number = parseInt(value, 10);
                    this.value = formatNumber(number);
                } else {
                    this.value = '';
                }
            });
        });

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØªØ¨Ø¯ÛŒÙ„ Ø±ÙˆØ² Ø¨Ù‡ Ù…Ø§Ù‡
        document.getElementById('military-service').addEventListener('input', function() {
            showMonthConversion(this.value);
        });

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            loadPensionFunds();
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ù‡ Ø¯Ú©Ù…Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡
            document.getElementById('calculate-btn').addEventListener('click', calculateInsurance);
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ù‡ Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
            document.getElementById('reset-btn').addEventListener('click', resetForm);
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Enter Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateInsurance();
                }
            });
        });
    </script>
</body>
</html>